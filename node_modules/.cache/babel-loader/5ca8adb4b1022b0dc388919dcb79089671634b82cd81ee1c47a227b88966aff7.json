{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:8000/api/properties/';\n\n// Función auxiliar para obtener el token de autenticación\nconst getAuthToken = () => {\n  return localStorage.getItem('authToken');\n};\nconst propertyService = {\n  getAllProperties: async () => {\n    try {\n      const response = await axios.get(API_URL);\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching properties:', error);\n      throw error;\n    }\n  },\n  getPropertyById: async id => {\n    try {\n      // Add authentication token to the request\n      const token = getAuthToken();\n      const config = {\n        headers: {\n          'Authorization': token ? `Token ${token}` : ''\n        }\n      };\n      console.log(`Requesting property with ID: ${id} from ${API_URL}${id}/`);\n      const response = await axios.get(`${API_URL}${id}/`, config);\n      console.log('API Response:', response);\n      return response.data;\n    } catch (error) {\n      console.error(`Error fetching property with id ${id}:`, error);\n      if (error.response) {\n        console.error('Response data:', error.response.data);\n        console.error('Response status:', error.response.status);\n      }\n      throw error;\n    }\n  },\n  getFeaturedProperties: async () => {\n    try {\n      const response = await axios.get(`${API_URL}featured/`);\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching featured properties:', error);\n      throw error;\n    }\n  },\n  searchProperties: async params => {\n    try {\n      const response = await axios.get(`${API_URL}search/`, {\n        params\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Error searching properties:', error);\n      throw error;\n    }\n  },\n  createProperty: async propertyData => {\n    try {\n      // Obtener token de autenticación\n      const token = getAuthToken();\n      const config = {\n        headers: {\n          'Content-Type': propertyData instanceof FormData ? 'multipart/form-data' : 'application/json',\n          'Authorization': token ? `Token ${token}` : ''\n        }\n      };\n      const response = await axios.post(API_URL, propertyData, config);\n      return response.data;\n    } catch (error) {\n      console.error('Error creating property:', error);\n      throw error;\n    }\n  },\n  // Make sure your propertyService.js has this method properly implemented\n\n  updateProperty: async (id, propertyData) => {\n    try {\n      // Get authentication token\n      const token = getAuthToken();\n\n      // Configure headers appropriately for multipart/form-data to handle file uploads\n      const config = {\n        headers: {\n          'Content-Type': propertyData instanceof FormData ? 'multipart/form-data' : 'application/json',\n          'Authorization': token ? `Token ${token}` : ''\n        }\n      };\n\n      // Log form data for debugging\n      if (propertyData instanceof FormData) {\n        console.log('Updating property with FormData:');\n        for (let [key, value] of propertyData.entries()) {\n          console.log(`${key}: ${value instanceof File ? `File: ${value.name}` : value}`);\n        }\n      }\n\n      // Use PATCH instead of PUT to allow partial updates\n      const response = await axios.patch(`${API_URL}${id}/`, propertyData, config);\n      return response.data;\n    } catch (error) {\n      console.error(`Error updating property with id ${id}:`, error);\n      throw error;\n    }\n  },\n  deleteProperty: async id => {\n    try {\n      // Obtener token de autenticación\n      const token = getAuthToken();\n      const config = {\n        headers: {\n          'Authorization': token ? `Token ${token}` : ''\n        }\n      };\n      const response = await axios.delete(`${API_URL}${id}/`, config);\n      return response.data;\n    } catch (error) {\n      console.error(`Error deleting property with id ${id}:`, error);\n      throw error;\n    }\n  }\n};\nexport default propertyService;","map":{"version":3,"names":["axios","API_URL","getAuthToken","localStorage","getItem","propertyService","getAllProperties","response","get","data","error","console","getPropertyById","id","token","config","headers","log","status","getFeaturedProperties","searchProperties","params","createProperty","propertyData","FormData","post","updateProperty","key","value","entries","File","name","patch","deleteProperty","delete"],"sources":["C:/Proyectos/BienesRaicesProyects/src/services/propertyService.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:8000/api/properties/';\r\n\r\n// Función auxiliar para obtener el token de autenticación\r\nconst getAuthToken = () => {\r\n  return localStorage.getItem('authToken');\r\n};\r\n\r\nconst propertyService = {\r\n  getAllProperties: async () => {\r\n    try {\r\n      const response = await axios.get(API_URL);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching properties:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  getPropertyById: async (id) => {\r\n    try {\r\n      // Add authentication token to the request\r\n      const token = getAuthToken();\r\n      \r\n      const config = {\r\n        headers: {\r\n          'Authorization': token ? `Token ${token}` : ''\r\n        }\r\n      };\r\n      \r\n      console.log(`Requesting property with ID: ${id} from ${API_URL}${id}/`);\r\n      const response = await axios.get(`${API_URL}${id}/`, config);\r\n      console.log('API Response:', response);\r\n      \r\n      return response.data;\r\n    } catch (error) {\r\n      console.error(`Error fetching property with id ${id}:`, error);\r\n      if (error.response) {\r\n        console.error('Response data:', error.response.data);\r\n        console.error('Response status:', error.response.status);\r\n      }\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  getFeaturedProperties: async () => {\r\n    try {\r\n      const response = await axios.get(`${API_URL}featured/`);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching featured properties:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  searchProperties: async (params) => {\r\n    try {\r\n      const response = await axios.get(`${API_URL}search/`, { params });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error searching properties:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  createProperty: async (propertyData) => {\r\n    try {\r\n      // Obtener token de autenticación\r\n      const token = getAuthToken();\r\n      \r\n      const config = {\r\n        headers: {\r\n          'Content-Type': propertyData instanceof FormData ? 'multipart/form-data' : 'application/json',\r\n          'Authorization': token ? `Token ${token}` : ''\r\n        },\r\n      };\r\n      \r\n      const response = await axios.post(API_URL, propertyData, config);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error creating property:', error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  // Make sure your propertyService.js has this method properly implemented\r\n  \r\n  updateProperty: async (id, propertyData) => {\r\n    try {\r\n      // Get authentication token\r\n      const token = getAuthToken();\r\n      \r\n      // Configure headers appropriately for multipart/form-data to handle file uploads\r\n      const config = {\r\n        headers: {\r\n          'Content-Type': propertyData instanceof FormData ? 'multipart/form-data' : 'application/json',\r\n          'Authorization': token ? `Token ${token}` : ''\r\n        },\r\n      };\r\n      \r\n      // Log form data for debugging\r\n      if (propertyData instanceof FormData) {\r\n        console.log('Updating property with FormData:');\r\n        for (let [key, value] of propertyData.entries()) {\r\n          console.log(`${key}: ${value instanceof File ? `File: ${value.name}` : value}`);\r\n        }\r\n      }\r\n      \r\n      // Use PATCH instead of PUT to allow partial updates\r\n      const response = await axios.patch(`${API_URL}${id}/`, propertyData, config);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error(`Error updating property with id ${id}:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  deleteProperty: async (id) => {\r\n    try {\r\n      // Obtener token de autenticación\r\n      const token = getAuthToken();\r\n      \r\n      const config = {\r\n        headers: {\r\n          'Authorization': token ? `Token ${token}` : ''\r\n        }\r\n      };\r\n      \r\n      const response = await axios.delete(`${API_URL}${id}/`, config);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error(`Error deleting property with id ${id}:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\nexport default propertyService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}